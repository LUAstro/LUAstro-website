<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Search | LUAstro</title>

  <!-- Add for this page itself -->
  <meta name="description" content="Search across all pages of the Lancaster University Astronomy Society site."/>
  <meta name="keywords" content="search, luaastro, astronomy"/>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link
    href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="/styles.css"/>
  <link rel="icon" href="/images/JR's LUAstro Logo.png" type="png">
</head>
<body>
  
  <header>
    <div class="star-bar"></div>
     <h1>Search the site</h1>
    <img class="follow-logo" src="/images/LUAstro_NavBar.png" alt="LUAstro" class="follow-logo">
    <nav>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/store/">Store</a></li>
        <li><a href="/astrophotography/">Astrophotography</a></li>
        <li><a href="/newsletters/">Newsletters</a></li>
        <li><a href="/exec/">Exec</a></li>
        <li><a href="/aboutus/">About us</a></li>
      </ul>
    </nav>
    
    <form id="siteSearchForm" class="site-search-form">
      <input type="text" id="siteSearchInput" name="q" placeholder="Search the site‚Ä¶" aria-label="Site search"/>
      <button type="submit">üîç</button>
    </form>
  </header>

  <main>
    <div class="container regular">
      <h2>Search results:</h2>
      <div id="searchResults"></div>
    </div>
    <div class="extra-space"></div>
  </main>


  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-section footer-mission">
        <h4>Lancaster University Astronomy Society</h4>
        <p>
          LUAstro observes the wonders of space and the stars all from the top
          of the Physics Building! Join us for observing nights,
          Astrophotography workshops, socials, and more!
        </p>
        <a
          href="https://lancastersu.co.uk/groups/astronomy-society-luastrosoc"
          class="join-btn"
          >Join Us ‚Üí</a
        >
      </div>

      <div class="footer-section footer-links">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/store/">Store</a></li>
          <li><a href="/astrophotography/">Astrophotography</a></li>
          <li><a href="/newsletters/">Newsletters</a></li>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/exec/">Exec Team</a></li>
          <li><a href="/aboutus/">About us</a></li>
        </ul>
      </div>

      <div class="footer-section footer-logo">
        <img src="/images/JR's LUAstro Logo.png" alt="LUAstro Logo"/>
      </div>

      <div class="footer-section footer-social">
        <h4>
          Follow
          <img
            src="/images/LUAstro_Wormstyle_DarkMode.png"
            alt="LUAstro"
            class="follow-logo"
          />
        </h4>
        <div class="social-icons">
          <a href="https://discord.gg/pWtk7SRUww" aria-label="Discord"
            ><img src="/images/discord.png" alt="Discord"
          /></a>
          <a href="https://www.instagram.com/luastrosoc/" aria-label="Instagram"
            ><img src="/images/instagram.png" alt="Instagram"
          /></a>
          <a href="https://twitter.com/luastrosoc" aria-label="Twitter"
            ><img src="/images/twitter.png" alt="Twitter"
          /></a>
          <a
            href="https://www.youtube.com/@lancasteruniversityastrono1095"
            aria-label="YouTube"
            ><img src="/images/youtube.png" alt="YouTube"
          /></a>
          <a
            href="https://www.facebook.com/LuAstroSoc/"
            aria-label="Facebook"
            ><img src="/images/facebook.png" alt="Facebook"
          /></a>
        </div>
        <a href="/newsletters/" class="footer-link">Newsletters</a>
      </div>
    </div>

    <div class="footer-bottom">
      <p>
        Last updated: August 16, 2025 | Last edited by:
        <a href="https://www.johnray.co.uk">John Ray</a>
      </p>
    </div>
  </footer>


  <!-- Background selector -->
  <script>
    (function() {
      const images = [
        '/images/JRAndromedaRevisited.jpg',
        '/images/bgRosetteNebulabyFinlay.jpg',
        '/images/bgOrionNebulabyIanto.jpg',
        '/images/JRCalNebREPROCESSED.jpg',
        '/images/bgPleiadesbyOrlando.jpg'
      ];
      document.body.style.setProperty('--page-bg', `url(${images[Math.floor(Math.random()*images.length)]})`);
    })();
  </script>

<script>
(async function(){
  // 1) List all the pages here (include a title and url like the ones included and put any blog entries below "LUAstro Blog")
  const pages = [
    { title: 'Homepage',            url: '/' },
    { title: 'LUAstro Store', url: '/store/' },
    { title: 'Astrophotography',url: '/astrophotography/' },
    { title: 'Newsletters',     url: '/newsletters/' },
    { title: 'LUAstro Blog', url: '/blog/' },
    { title: 'Blog: www.luastro.space announcement', url: '/blog/new-website-announcement/' },
    { title: 'Exec Team',       url: '/exec/' },
    { title: 'About Us',        url: '/aboutus/' },
    { title: 'Search page', url: '/search/' },

    // Add any newsletter pdfs here (include a description & keywords)
    { title: 'Week 16, 22/23 Newsletter', url: '/newsletters/February 2023 (Week 16).pdf', description: 'ARCHIVE: LUAstro Newsletter from Feb 2023 (Week 16)' , keywords: 'newsletters, archive, 2023, feb 2023, week 16, newsletter, 22/23'},
    { title: 'Week 15, 22/23 Newsletter', url: '/newsletters/LYMAN-alpha Special Edition February 2023 (Week 15).pdf', description: 'ARCHIVE: LYMAN-alpha Special-edition LUAstro Newsletter from Feb 2023 (Week 15)', 
     keywords: 'newsletters, archive, 2023, feb 2023, week 15, LYMAN-alpha, Roses, University of York, University of york astronomy society, competition, newsletter, 22/23' },
    { title: 'Week 14, 22/23 Newsletter', url: '/newsletters/February 2023 (Week 14).pdf', description: 'ARCHIVE: LUAstro Newsletter from Feb 2023 (Week 14)', keywords: 'newsletters, archive, 2023, feb 2023, week 14, newsletter, 22/23' },
    { title: 'Week 13, 22/23 Newsletter', url: '/newsletters/February 2023 (Week 13).pdf', description: 'ARCHIVE: LUAstro Newsletter from Feb 2023 (Week 13)', keywords: 'newsletters, archive, 2023, feb 2023, week 13, newsletter, 22/23' },
    { title: 'Week 12, 22/23 Newsletter', url: '/newsletters/January 2023 (Week 12).pdf', description: 'ARCHIVE: LUAstro Newsletter from Jan 2023 (Week 12)', keywords: 'newsletters, archive, 2023, jan 2023, week 12, newsletter, 22/23' },
    { title: 'Week 6, 22/23 Newsletter', url: '/newsletters/December 2022 (Week 6).pdf', description: 'ARCHIVE: LUAstro Newsletter from Dec 2022 (Week 6)', keywords: 'newsletters, archive, 2022, dec 2022, week 6, newsletter, 22/23' },
    { title: 'Week 5, 22/23 Newsletter', url: '/newsletters/December 2022 (Week 5).pdf', description: 'ARCHIVE: LUAstro Newsletter from Dec 2022 (Week 5)', keywords: 'newsletters, archive, 2022, dec 2023, week 5, newsletter, 22/23' },
    { title: 'Week 1, 22/23 Newsletter', url: '/newsletters/November 2022 (Week 1).pdf', description: 'ARCHIVE: The first LUAstro Newsletter from Nov 2022 (Week 1)', keywords: 'newsletters, archive, 2022, nov 2022, week 1, first newsletter, newsletter, 22/23' },
    // Add new pages here‚Äîand they'll be fetched automatically
  ];

  // 2) Helper: fetch & parse meta from each page
  async function fetchMeta(page) {
    let desc = '', keys = '';
    try {
      // If the URL is a PDF, skip fetching HTML and use provided description or filename fallback
      const isPdf = /\.pdf(\?.*)?$/i.test(page.url);
      if (isPdf) {
        const filename = (page.url.split('/').pop() || page.title || page.url).split('?')[0];
        desc = page.description || `PDF: ${filename}`;
        keys = page.keywords || '';
        return { ...page, description: desc, keywords: keys, isPdf: true };
      }

      const res  = await fetch(page.url);
      const text = await res.text();
      const doc  = new DOMParser().parseFromString(text, 'text/html');
      desc = doc.querySelector('meta[name="description"]')?.content || '';
      keys = doc.querySelector('meta[name="keywords"]')?.content    || '';
    } catch(e) {
      console.warn('Failed to fetch', page.url, e);
    }
    return { ...page, description: desc, keywords: keys, isPdf: false };
  }

  // 3) Build index by fetching each page
  const indexed = await Promise.all(pages.map(fetchMeta));

  // 4) Read query and populate input‚Ä¶
  const params = new URLSearchParams(location.search);
  const q      = (params.get('q')||'').trim().toLowerCase();
  const input  = document.getElementById('siteSearchInput');
  input.value  = params.get('q')||'';
  document.getElementById('siteSearchForm')
    .addEventListener('submit', e => {
      e.preventDefault();
      const nq = encodeURIComponent(input.value.trim());
      if(!nq) return;
      location.search = `?q=${nq}`;
    });

  // 5) Filter by title OR keywords OR description
  const results = indexed.filter(p =>
    p.title.toLowerCase().includes(q) ||
    p.keywords.toLowerCase().includes(q) ||
    p.description.toLowerCase().includes(q)
  );

  // 6) Render as before‚Ä¶
  const container = document.getElementById('searchResults');
  container.innerHTML = `<h3>Results for ‚Äú${params.get('q')||''}‚Äù</h3>`;
  if (!q) {
    container.innerHTML += '<p>Please enter a search term above.</p>';
  } else if (results.length === 0) {
    container.innerHTML += '<p>No pages found.</p>';
  } else {
    results.forEach(p => {
      const entry = document.createElement('div');
      entry.style.marginBottom = '1.5rem';
      const isPdf = p.isPdf === true;
      const descSafe = (p.description || '').replace(/</g,'&lt;').replace(/>/g,'&gt;');
      entry.innerHTML = `
        <a href="${p.url}" style="font-size:1.2rem;font-weight:600;color:#b5121b;" ${isPdf ? 'target="_blank" rel="noopener noreferrer"' : ''}>
          ${p.title} ${isPdf ? '<small style="font-weight:400;color:#666">[PDF]</small>' : ''}
        </a>
        <p style="margin-top:0.3rem;color:#ccc;">${descSafe}</p>
      `;
      container.appendChild(entry);
    });
  }
})();
</script>


</body>
</html>





